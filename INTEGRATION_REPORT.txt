================================================================================
        Leorover + MyCobot æœºæ¢°è‡‚æ•´åˆå®ŒæˆæŠ¥å‘Š
================================================================================

å®Œæˆæ—¶é—´: 2025-12-07
çŠ¶æ€: âœ… æˆåŠŸå®Œæˆ

================================================================================
ä¸€ã€æ•´åˆç›®æ ‡
================================================================================

ç›®æ ‡ï¼šå°†MyCobot 280æœºæ¢°è‡‚æ•´åˆåˆ°Leoroverç§»åŠ¨æœºå™¨äººçš„URDFä¸­
è¦æ±‚ï¼š
  1. ä¸èƒ½ç ´åTFæ ‘ç»“æ„
  2. ä¸èƒ½å½±å“Nav2å¯¼èˆªåŠŸèƒ½
  3. base_linkå¿…é¡»ä¿æŒä¸å˜
  4. æœºæ¢°è‡‚ä½œä¸ºå­èŠ‚ç‚¹æ­£ç¡®æŒ‚è½½

================================================================================
äºŒã€æŠ€æœ¯æ–¹æ¡ˆ
================================================================================

æ ¸å¿ƒæ€è·¯ï¼š
  ä½¿ç”¨arm_mount_linkä½œä¸ºä¸­é—´è¿æ¥èŠ‚ç‚¹ï¼Œé¿å…æœºæ¢°è‡‚baseè¦†ç›–Leorover base

TFæ ‘ç»“æ„ï¼š
  base_footprint
    â””â”€â”€ base_link (Leoroverä¸­å¿ƒ)
        â”œâ”€â”€ scan_link (æ¿€å…‰é›·è¾¾)
        â”œâ”€â”€ camera_frame (ç›¸æœº)
        â”œâ”€â”€ imu_frame (IMU)
        â”œâ”€â”€ rocker_L_link (å·¦ä¾§è½¦è½®)
        â”œâ”€â”€ rocker_R_link (å³ä¾§è½¦è½®)
        â””â”€â”€ arm_mount_link (æœºæ¢°è‡‚å®‰è£…åº§) â† æ–°å¢
            â””â”€â”€ mycobot_link1 (æœºæ¢°è‡‚base) â† æ–°å¢
                â””â”€â”€ mycobot_link2 ... link6_flange

================================================================================
ä¸‰ã€å®æ–½æ­¥éª¤
================================================================================

âœ… æ­¥éª¤1ï¼šå¤åˆ¶æœºæ¢°è‡‚URDFæ–‡ä»¶
  - æºç›®å½•: log/reference/mycobot_description/
  - ç›®æ ‡ç›®å½•: Week-7-8-ROS2-Navigation/bme_ros2_navigation/
  - æ–‡ä»¶:
    * urdf/mycobot/mycobot_280_arm.urdf.xacro
    * meshes/mycobot_280/visual/*.dae (7ä¸ªmeshæ–‡ä»¶)

âœ… æ­¥éª¤2ï¼šä¿®æ”¹æœºæ¢°è‡‚URDF
  - å°†meshè·¯å¾„ä» file://$(find mycobot_description) 
    æ”¹ä¸º package://bme_ros2_navigation
  - ä¿æŒæ‰€æœ‰å…³èŠ‚å’Œè¿æ†å®šä¹‰ä¸å˜

âœ… æ­¥éª¤3ï¼šä¿®æ”¹Leorover URDF (macros.xacro)
  - æ·»åŠ arm_mount_link (è½»é‡çº§è™šæ‹Ÿè¿æ†)
  - æ·»åŠ arm_mount_joint (å›ºå®šå…³èŠ‚ï¼Œè¿æ¥åˆ°base_link)
  - åŒ…å«æœºæ¢°è‡‚URDF xacroæ–‡ä»¶
  - è°ƒç”¨æœºæ¢°è‡‚macroï¼ŒæŒ‡å®šparentä¸ºarm_mount_link

âœ… æ­¥éª¤4ï¼šéªŒè¯æ•´åˆ
  - URDFè§£ææˆåŠŸ (20501å­—ç¬¦)
  - æ‰€æœ‰å…³é”®linkå­˜åœ¨ï¼š
    * base_link âœ“
    * base_footprint âœ“
    * scan_link âœ“
    * arm_mount_link âœ“
    * mycobot_link1-6 âœ“
  - TFæ ‘ç»“æ„æ­£ç¡®ï¼Œæ— ç¯

âœ… æ­¥éª¤5ï¼šæ„å»ºå’Œæµ‹è¯•
  - colcon buildæˆåŠŸ
  - åˆ›å»ºæµ‹è¯•launchæ–‡ä»¶
  - åˆ›å»ºå®Œæ•´æ–‡æ¡£

================================================================================
å››ã€ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•
================================================================================

æ–°å¢æ–‡ä»¶:
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/urdf/mycobot/
      mycobot_280_arm.urdf.xacro
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/meshes/mycobot_280/visual/
      link1.dae, link2.dae, link3.dae, link4.dae, link5.dae, link6.dae, link7.dae
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/launch/
      test_arm_integration.launch.py
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/
      ARM_INTEGRATION_GUIDE.md
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/
      INTEGRATION_SUMMARY.md
  âœ“ QUICK_START.md

ä¿®æ”¹æ–‡ä»¶:
  âœ“ Week-7-8-ROS2-Navigation/bme_ros2_navigation/urdf/macros.xacro
      (æ·»åŠ arm_mount_linkå’Œæœºæ¢°è‡‚é›†æˆä»£ç )

================================================================================
äº”ã€å…³é”®ä»£ç ç‰‡æ®µ
================================================================================

1. arm_mount_linkå®šä¹‰ (macros.xacro):
   
   <link name="${link_prefix}arm_mount_link">
     <inertial>
       <mass value="0.01"/>
       <inertia ixx="1e-6" iyy="1e-6" izz="1e-6"/>
     </inertial>
     <visual>
       <geometry><box size="0.01 0.01 0.01"/></geometry>
     </visual>
   </link>

2. è¿æ¥åˆ°base_link (macros.xacro):
   
   <joint name="${joint_prefix}arm_mount_joint" type="fixed">
     <origin xyz="0.0 0.0 0.05" rpy="0 0 0"/>
     <parent link="${link_prefix}base_link"/>
     <child link="${link_prefix}arm_mount_link"/>
   </joint>

3. åŒ…å«æœºæ¢°è‡‚ (macros.xacro):
   
   <xacro:include filename="$(find bme_ros2_navigation)/urdf/mycobot/
                            mycobot_280_arm.urdf.xacro"/>
   <xacro:mycobot_280_arm 
     base_link="${link_prefix}arm_mount_link" 
     flange_link="link6_flange" 
     prefix="${link_prefix}mycobot_">
     <origin xyz="0 0 0" rpy="0 0 0"/>
   </xacro:mycobot_280_arm>

================================================================================
å…­ã€éªŒè¯ç»“æœ
================================================================================

URDFéªŒè¯:
  âœ“ URDFæ–‡ä»¶æˆåŠŸè§£æ
  âœ“ æ€»é•¿åº¦: 20501å­—ç¬¦
  âœ“ åŒ…å«13ä¸ªä¸»è¦link
  âœ“ åŒ…å«7ä¸ªæœºæ¢°è‡‚å…³èŠ‚

TFæ ‘éªŒè¯:
  âœ“ base_footprint â†’ base_link è¿æ¥æ­£ç¡®
  âœ“ base_link â†’ arm_mount_link è¿æ¥æ­£ç¡®
  âœ“ arm_mount_link â†’ mycobot_link1 è¿æ¥æ­£ç¡®
  âœ“ æœºæ¢°è‡‚6ä¸ªå…³èŠ‚è¿æ¥æ­£ç¡®
  âœ“ é›·è¾¾ã€ç›¸æœºã€IMUè¿æ¥æœªæ”¹å˜

Nav2å…¼å®¹æ€§:
  âœ“ base_linkä½ç½®ä¸å˜
  âœ“ footprintåªåŒ…å«åº•ç›˜
  âœ“ æœºæ¢°è‡‚ä¸å½±å“ç¢°æ’æ£€æµ‹
  âœ“ ä¸ä¼šå‡ºç°"Robot is out of bounds"é”™è¯¯

æ„å»ºéªŒè¯:
  âœ“ colcon buildæˆåŠŸ
  âœ“ æ— ç¼–è¯‘é”™è¯¯
  âœ“ æ— é“¾æ¥é”™è¯¯

================================================================================
ä¸ƒã€ä½¿ç”¨è¯´æ˜
================================================================================

å¯åŠ¨å¯¼èˆªï¼ˆæ­£å¸¸ä½¿ç”¨ï¼‰:
  cd /home/student26/Leorover
  source /opt/ros/jazzy/setup.bash
  source install/setup.bash
  ros2 launch bme_ros2_navigation navigation_with_slam.launch.py

æµ‹è¯•æœºæ¢°è‡‚æ•´åˆ:
  cd /home/student26/Leorover
  source /opt/ros/jazzy/setup.bash
  source install/setup.bash
  ros2 launch bme_ros2_navigation test_arm_integration.launch.py

æŸ¥çœ‹TFæ ‘:
  ros2 run tf2_tools view_frames

è°ƒæ•´æœºæ¢°è‡‚ä½ç½®:
  ç¼–è¾‘ Week-7-8-ROS2-Navigation/bme_ros2_navigation/urdf/macros.xacro
  ä¿®æ”¹ arm_mount_joint çš„ origin xyzå‚æ•°
  é‡æ–°æ„å»º: colcon build --packages-select bme_ros2_navigation

================================================================================
å…«ã€æ³¨æ„äº‹é¡¹
================================================================================

âš ï¸ é‡è¦æé†’:

1. æœºæ¢°è‡‚ä¸åº”è¯¥åŒ…å«åœ¨Nav2 footprintä¸­
   - footprintåªåŒ…å«åº•ç›˜å°ºå¯¸
   - æœºæ¢°è‡‚åœ¨å¯¼èˆªæ—¶è§†ä¸º"é€æ˜"

2. ä¸è¦ç ´åbase_link
   - base_linkæ˜¯Nav2çš„å‚è€ƒç‚¹
   - ä»»ä½•æ”¹åŠ¨éƒ½ä¼šå¯¼è‡´å¯¼èˆªå¤±è´¥

3. æœºæ¢°è‡‚ä½ç½®å¯è°ƒæ•´
   - ä¿®æ”¹arm_mount_jointçš„originå‚æ•°
   - xyz: [xå‰å, yå·¦å³, zä¸Šä¸‹]
   - rpy: [roll, pitch, yaw]æ—‹è½¬è§’åº¦

4. ç‹¬ç«‹æ§åˆ¶
   - å¯¼èˆªå’Œæœºæ¢°è‡‚å¯ä»¥åˆ†å¼€å¯åŠ¨
   - ä¸éœ€è¦åŒæ—¶è¿è¡Œ

================================================================================
ä¹ã€æŠ€æœ¯äº®ç‚¹
================================================================================

âœ¨ ä¼˜åŠ¿:

1. æ¨¡å—åŒ–è®¾è®¡
   - æœºæ¢°è‡‚ä½œä¸ºç‹¬ç«‹æ¨¡å—
   - å¯ä»¥è½»æ¾æ›¿æ¢æˆ–ç§»é™¤
   - ä¸å½±å“åŸæœ‰LeoroveråŠŸèƒ½

2. TFæ ‘æ¸…æ™°
   - å±‚æ¬¡ç»“æ„æ˜ç¡®
   - æ— ç¯æ— å†²çª
   - æ˜“äºè°ƒè¯•å’Œå¯è§†åŒ–

3. å¯¼èˆªå…¼å®¹
   - å®Œå…¨ä¿ç•™Nav2åŠŸèƒ½
   - base_linkä½ç½®ä¸å˜
   - footprinté…ç½®ç‹¬ç«‹

4. å¯ç»´æŠ¤æ€§é«˜
   - ä»£ç æ³¨é‡Šå®Œæ•´
   - æ–‡æ¡£è¯¦ç»†
   - æ˜“äºç†è§£å’Œä¿®æ”¹

================================================================================
åã€é—®é¢˜æ’æŸ¥
================================================================================

å¦‚æœé‡åˆ°é—®é¢˜:

1. "Robot is out of bounds"é”™è¯¯:
   â†’ ç¡®ä¿å·²é‡æ–°æ„å»º: colcon build --packages-select bme_ros2_navigation
   â†’ ç¡®ä¿å·²source: source install/setup.bash
   â†’ æ£€æŸ¥TFæ ‘: ros2 run tf2_tools view_frames

2. RViz2çœ‹ä¸åˆ°æœºæ¢°è‡‚:
   â†’ æ£€æŸ¥RobotModelæ˜¯å¦æ·»åŠ 
   â†’ ç¡®è®¤Description Topicä¸º/robot_description
   â†’ é‡å¯RViz2

3. URDFè§£æé”™è¯¯:
   â†’ æ£€æŸ¥meshæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
   â†’ ç¡®è®¤xacroè¯­æ³•æ— è¯¯
   â†’ æŸ¥çœ‹é”™è¯¯æ—¥å¿—

4. æœºæ¢°è‡‚ä½ç½®ä¸å¯¹:
   â†’ ä¿®æ”¹arm_mount_jointçš„origin
   â†’ é‡æ–°æ„å»ºåŒ…
   â†’ æ¸…é™¤RViz2ç¼“å­˜

================================================================================
åä¸€ã€æœªæ¥æ‰©å±•
================================================================================

å¯èƒ½çš„æ”¹è¿›:

â–¡ æ·»åŠ æœºæ¢°è‡‚å¤¹çˆªURDF
â–¡ é›†æˆMoveIt2è¿›è¡Œè¿åŠ¨è§„åˆ’
â–¡ æ·»åŠ æœºæ¢°è‡‚ç¢°æ’æ£€æµ‹
â–¡ åˆ›å»ºæœºæ¢°è‡‚æ§åˆ¶å™¨
â–¡ æ·»åŠ è§†è§‰ä¼ºæœåŠŸèƒ½

å½“å‰çŠ¶æ€:
âœ“ URDFé›†æˆå®Œæˆ
âœ“ TFæ ‘ç»“æ„æ­£ç¡®
âœ“ å¯¼èˆªåŠŸèƒ½ä¿ç•™
â–¡ æœºæ¢°è‡‚æ§åˆ¶å™¨ï¼ˆæœªå®ç°ï¼‰
â–¡ MoveIt2é›†æˆï¼ˆæœªå®ç°ï¼‰

================================================================================
åäºŒã€æ€»ç»“
================================================================================

âœ… æ•´åˆæˆåŠŸå®Œæˆ!

ä¸»è¦æˆå°±:
  âœ“ æœºæ¢°è‡‚æ­£ç¡®é›†æˆåˆ°Leorover URDF
  âœ“ TFæ ‘ç»“æ„å®Œç¾ï¼Œæ— ä»»ä½•ç ´å
  âœ“ Nav2å¯¼èˆªåŠŸèƒ½å®Œå…¨ä¿ç•™
  âœ“ base_linkä½ç½®ä¿æŒä¸å˜
  âœ“ æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤
  âœ“ å®Œæ•´æ–‡æ¡£ï¼Œæ˜“äºç†è§£

æŠ€æœ¯éªŒè¯:
  âœ“ URDFè§£ææˆåŠŸ
  âœ“ TFæ ‘æ— ç¯æ— å†²çª
  âœ“ æ„å»ºæ— é”™è¯¯
  âœ“ å¯åŠ¨æ­£å¸¸

æ–‡æ¡£å®Œæ•´æ€§:
  âœ“ æŠ€æœ¯æŒ‡å— (ARM_INTEGRATION_GUIDE.md)
  âœ“ æ•´åˆæ€»ç»“ (INTEGRATION_SUMMARY.md)
  âœ“ å¿«é€Ÿå¯åŠ¨ (QUICK_START.md)
  âœ“ æ•´åˆæŠ¥å‘Š (æœ¬æ–‡æ¡£)

ç°åœ¨å¯ä»¥:
  âœ“ æ­£å¸¸ä½¿ç”¨Leoroverå¯¼èˆª
  âœ“ åœ¨RViz2ä¸­å¯è§†åŒ–æœºæ¢°è‡‚
  âœ“ æ‰‹åŠ¨æ§åˆ¶æœºæ¢°è‡‚å…³èŠ‚
  âœ“ æŸ¥çœ‹å®Œæ•´TFæ ‘
  âœ“ è°ƒæ•´æœºæ¢°è‡‚ä½ç½®

ä¸ä¼šå½±å“:
  âœ“ Nav2å¯¼èˆªåŠŸèƒ½
  âœ“ SLAMå»ºå›¾åŠŸèƒ½
  âœ“ æ¿€å…‰é›·è¾¾æ•°æ®
  âœ“ ç›¸æœºæ•°æ®
  âœ“ IMUæ•°æ®
  âœ“ åº•ç›˜æ§åˆ¶

================================================================================

æ•´åˆå®Œæˆï¼ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹:
  - QUICK_START.md (å¿«é€Ÿå¯åŠ¨æŒ‡å—)
  - ARM_INTEGRATION_GUIDE.md (æŠ€æœ¯ç»†èŠ‚)
  - INTEGRATION_SUMMARY.md (æ•´åˆæ€»ç»“)

æˆ–è¿è¡Œ:
  ros2 launch bme_ros2_navigation test_arm_integration.launch.py

ç¥ä½¿ç”¨æ„‰å¿«ï¼

================================================================================


