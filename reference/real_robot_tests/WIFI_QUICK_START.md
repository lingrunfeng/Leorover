# 🤖 MyCobot 真实机器快速测试指南（WiFi版）

## ✅ 当前连接状态

- **连接方式**：WiFi（同一网络）
- **树莓派IP**：`10.209.139.36`
- **SSH命令**：`ssh elephant@10.209.139.36`
- **密码**：`trunk`
- **状态**：✅ 已连接，稳定

---

## 🚀 快速开始（3步搞定）

### **步骤1：连接SSH**

```bash
ssh elephant@10.209.139.36
# 密码：trunk
```

### **步骤2：上传测试脚本**

在**你的电脑**（新终端，不是SSH）运行：

```bash
scp ~/mycobot/real_robot_tests/test_real_coordinate_grasp.py elephant@10.209.139.36:~/
# 密码：trunk
```

### **步骤3：运行测试**

在**SSH终端**（树莓派）运行：

```bash
python3 ~/test_real_coordinate_grasp.py
```

**完成！** 开始逐个测试坐标！

---

## 📋 或者：一键测试（无需上传文件）

如果不想上传文件，直接在**SSH终端**复制粘贴运行：

```bash
python3 << 'EOF'
from pymycobot.mycobot import MyCobot
import time

mc = MyCobot('/dev/ttyAMA0', 1000000)
time.sleep(2)

print("="*70)
print("📐 坐标抓取测试")
print("="*70)

# 5个测试位置（从简单到极限）
tests = [
    {"name": "基准测试", "x": 150, "y": 0, "z": 100},
    {"name": "向前20cm", "x": 200, "y": 0, "z": 100},
    {"name": "底座同高", "x": 150, "y": 0, "z": 0},
    {"name": "向下5cm", "x": 150, "y": 0, "z": -50},
    {"name": "仿真极限", "x": 270, "y": 0, "z": -80},
]

for i, t in enumerate(tests, 1):
    print(f"\n[{i}/5] {t['name']}: X={t['x']}, Y={t['y']}, Z={t['z']}")
    
    if input("执行？(y/n): ") != 'y':
        continue
    
    # 获取当前姿态
    cur = mc.get_coords()
    
    # 移动到目标（保持姿态）
    target = [t['x'], t['y'], t['z'], cur[3], cur[4], cur[5]]
    mc.send_coords(target, 30, 0)
    
    # 等待
    for j in range(6):
        time.sleep(1)
        print(f"  ⏳ {j+1}/6...")
    
    # 检查结果
    final = mc.get_coords()
    print(f"  目标: [{t['x']}, {t['y']}, {t['z']}]")
    print(f"  实际: [{final[0]:.1f}, {final[1]:.1f}, {final[2]:.1f}]")
    print(f"  误差: X={abs(final[0]-t['x']):.1f}, Z={abs(final[2]-t['z']):.1f}mm")
    
    # 返回HOME
    print("  🏠 返回HOME...")
    mc.send_angles([0,0,0,0,0,0], 30)
    time.sleep(6)

print("\n✅ 测试完成！")
EOF
```

---

## 🎯 测试说明

### **5个测试位置**

| # | 名称 | 坐标(mm) | 难度 | 说明 |
|---|------|---------|------|------|
| 1 | 基准测试 | X:150, Z:100 | ⭐ | 安全位置，必须成功 |
| 2 | 向前20cm | X:200, Z:100 | ⭐⭐ | 测试水平距离 |
| 3 | 底座同高 | X:150, Z:0 | ⭐⭐ | 与底座同高 |
| 4 | 向下5cm | X:150, Z:-50 | ⭐⭐⭐ | 向下延伸 |
| 5 | **仿真极限** | X:270, Z:-80 | ⭐⭐⭐⭐ | **重点！** 仿真成功值 |

---

## 📊 预期结果

### **成功标准**：
- ✅ send_coords返回 `1`
- ✅ 误差 < 20mm
- ✅ 机械臂到达目标位置

### **仿真vs真机对照**：

| 位置 | 仿真(m) | 真机(mm) | 说明 |
|------|--------|---------|------|
| 基准 | 0.15, 0.10 | 150, 100 | ×1000 |
| 极限 | 0.27, -0.08 | 270, -80 | 你的测试成功值 |

---

## ⚠️ 安全提示

1. **第一次可以跳过极限测试**（输入`n`）
2. **观察每次运动**，确保安全
3. **准备好关电源**（急停）
4. **确保周围无障碍物**

---

## 🆘 快速故障排查

### **问题：angles返回-1**
```bash
sudo chmod 666 /dev/ttyAMA0
```

### **问题：WiFi断开**
```bash
# 重新连接
ssh elephant@10.209.139.36
```

### **问题：坐标到不了**
- 可能超出范围
- 尝试更小的值
- 检查物理障碍

---

## 📝 测试记录

手写记录结果：

```
□ 基准测试 (150, 100)：____
□ 向前20cm (200, 100)：____  
□ 底座同高 (150, 0)：____
□ 向下5cm (150, -50)：____
□ 仿真极限 (270, -80)：____
```

---

## 🎉 测试完成后

### **如果全部成功**：
- ✅ 真实机器能力验证完成
- ✅ 可以开始实际抓取任务
- ✅ 考虑集成MoveIt（可选）

### **如果极限值失败**：
- 📏 记录真实极限值
- 📝 调整仿真参数
- 🔄 在真实范围内工作

---

## 🔗 下一步

测试完成后可以：
1. **实际抓取物体**（放置测试物体）
2. **集成到ROS2**（如果需要MoveIt）
3. **记录工作空间数据**（为以后参考）

---

**现在就开始测试吧！** 🚀

复制上面的一键测试脚本，粘贴到SSH终端，按回车运行！
