# 🤖 MyCobot 280 Pi 真实机器测试指南

> **完全隔离的测试环境** - 不影响仿真代码！

## 📋 测试流程

### 🔌 物理连接步骤

1. **固定机械臂**
   - 使用夹子或吸盘将底座固定在桌面上
   - 确保非常牢固，机械臂运动时不会晃动

2. **连接USB线**
   - 找到机械臂底座**侧面**的 Type-C 接口
   - 用 USB Type-C 线连接到你的电脑
   - 如果电脑只有 USB-A 口，使用转接头

3. **上电**
   - 连接 12V 电源适配器
   - 打开底座前面的电源开关
   - 等待几秒，伺服电机会通电（可能听到轻微声音）

4. **检查设备**
   ```bash
   # 查看是否识别到设备
   ls /dev/ttyUSB* /dev/ttyACM*
   
   # 如果看到设备但权限不足，运行：
   sudo chmod 666 /dev/ttyUSB0  # 替换成你的设备名
   ```

---

## 🧪 测试脚本说明

### **测试1：USB连接测试** (必做)
```bash
cd ~/mycobot/real_robot_tests
python3 1_test_usb_connection.py
```

**测试内容**：
- ✅ 自动检测串口设备
- ✅ 读取关节角度
- ✅ 读取末端坐标
- ✅ 可选：夹爪测试

**预期结果**：能看到6个关节的角度和末端坐标

---

### **测试2：简单运动测试** (必做)
```bash
python3 2_simple_move_test.py
```

**测试内容**：
- ✅ 移动到HOME位置（所有关节归零）
- ✅ 轻微移动单个关节
- ✅ 末端坐标控制

**安全提示**：
- ⚠️ 确保机械臂周围无障碍物
- ⚠️ 速度设置为20%，非常慢
- ⚠️ 每个动作都需要确认

**预期结果**：机械臂平稳移动，无抖动或异常

---

### **测试3：向下抓取极限测试** (可选)
```bash
python3 3_downward_reach_real_test.py
```

**测试内容**：
- 📏 验证仿真中的向下抓取能力
- 📏 测试序列：
  1. Z=0mm（基准）
  2. Z=-50mm（向下5cm）
  3. Z=-80mm（向下8cm，仿真成功值）
  4. X=270mm, Z=-50mm（距离挑战）
  5. X=270mm, Z=-80mm（仿真极限值）

**参考数据**：
```
仿真测试成功：X=270mm, Z=-80mm
（来自 DOWNWARD_REACH_TEST.md）
```

**预期结果**：
- ✅ 真实机器能达到仿真的大部分范围
- ⚠️ 可能因硬件差异有小幅差距
- 📊 得到真实的工作空间数据

---

## 🔄 与仿真环境的关系

### ✅ **完全隔离，互不影响**

| 项目 | 仿真环境 | 真实测试 |
|------|---------|---------|
| **位置** | `~/mycobot/src/` | `~/mycobot/real_robot_tests/` |
| **运行方式** | ROS2 Launch | Python 直接运行 |
| **依赖** | Gazebo, MoveIt | pymycobot |
| **互相影响** | ❌ 完全独立 | ❌ 完全独立 |

### 🔀 **随时切换**

```bash
# 运行仿真（和以前一样）
cd ~/mycobot
source install/setup.bash
ros2 launch mycobot_mtc_pick_place_demo mtc_grasp_pose.launch.py

# 运行真实测试（完全独立）
cd ~/mycobot/real_robot_tests
python3 1_test_usb_connection.py
```

---

## 🆘 常见问题

### ❓ 找不到设备 `/dev/ttyUSB*`

**可能原因**：
1. USB线未连接或损坏
2. 机械臂未上电
3. 驱动问题

**解决方法**：
```bash
# 检查USB设备
lsusb

# 查看内核消息
dmesg | tail -20

# 如果看到设备但无权限
sudo chmod 666 /dev/ttyUSB0
```

---

### ❓ 连接成功但无法读取数据

**可能原因**：
1. 波特率不对
2. 固件版本不兼容

**解决方法**：
- 尝试不同波特率：115200, 1000000
- 检查固件版本（官方文档）

---

### ❓ 机械臂移动异常（抖动/卡顿）

**可能原因**：
1. 速度太快
2. 目标位置超出范围
3. 电源电压不足

**解决方法**：
- 降低速度参数（10-20）
- 检查目标坐标是否合理
- 使用官方12V 5A适配器

---

## 📊 测试数据记录

建议创建测试记录表格：

| 日期 | 测试项 | X(mm) | Z(mm) | 结果 | 备注 |
|------|--------|-------|-------|------|------|
| 2024-12-10 | 基准 | 150 | 0 | ✅ | 无误差 |
| 2024-12-10 | 向下5cm | 150 | -50 | ✅ | 误差3mm |
| ... | ... | ... | ... | ... | ... |

---

## 🎯 下一步

测试成功后的可能方向：

1. **集成到ROS2**
   - 创建硬件接口节点
   - 连接到MoveIt规划器
   - 实现完整的抓取流程

2. **优化参数**
   - 根据真实测试调整工作空间
   - 校准坐标系
   - 优化运动速度

3. **实际应用**
   - 在Leo Rover上部署
   - 抓取真实物体
   - 集成视觉系统

---

## 📝 总结

- ✅ 这个测试环境**完全独立**
- ✅ 可以**随时删除**而不影响仿真
- ✅ 是从仿真到真机的**安全过渡**
- ✅ 测试完成后可以决定是否集成到ROS2

**祝测试顺利！** 🚀
